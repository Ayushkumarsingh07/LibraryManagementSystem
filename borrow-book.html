<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borrow Book - LibraFlow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-xl mx-auto p-6">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 border-b pb-2 border-gray-300">Borrow Book</h1>
        <div class="bg-white p-6 shadow-lg rounded-lg border border-gray-200">
            <form id="borrowBookForm" class="space-y-4">
                <div>
                    <label class="block mb-1 font-medium">Member ID</label>
                    <input type="text" id="memberId" required class="w-full border border-gray-300 p-2 rounded">
                </div>
                <div>
                    <label class="block mb-1 font-medium">Book ISBN</label>
                    <input type="text" id="bookIsbn" required class="w-full border border-gray-300 p-2 rounded">
                </div>
                <div>
                    <label class="block mb-1 font-medium">Borrow Date</label>
                    <input type="date" id="borrowDate" required class="w-full border border-gray-300 p-2 rounded">
                </div>
                <div>
                    <label class="block mb-1 font-medium">Due Date</label>
                    <input type="date" id="dueDate" required class="w-full border border-gray-300 p-2 rounded">
                </div>
                <button type="submit" class="bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white font-semibold px-5 py-2 rounded shadow">Borrow Book</button>
            </form>
            <div id="borrowSuccess" class="mt-4 hidden text-sm text-green-800 bg-green-100 border border-green-200 px-4 py-2 rounded">
                ✅ Book borrowed successfully!
            </div>
            <a href="index.html" class="block mt-6 text-blue-600 hover:underline text-sm">← Back to Dashboard</a>
        </div>
    </div>

    <script>
        document.getElementById('borrowBookForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const borrowData = {
                id: crypto.randomUUID(),
                memberId: document.getElementById('memberId').value,
                bookIsbn: document.getElementById('bookIsbn').value,
                borrowDate: document.getElementById('borrowDate').value,
                dueDate: document.getElementById('dueDate').value,
                borrowedDate: new Date().toISOString().split("T")[0],
                status: "Borrowed"
            };

            const borrowedBooks = JSON.parse(localStorage.getItem('borrowedBooks')) || [];
            borrowedBooks.push(borrowData);
            localStorage.setItem('borrowedBooks', JSON.stringify(borrowedBooks));

            // Store today's borrowed books for dashboard consistency
            const today = new Date().toISOString().split("T")[0];
            const borrowedTodayList = JSON.parse(localStorage.getItem('borrowedTodayList')) || [];
            borrowedTodayList.push(borrowData);
            localStorage.setItem('borrowedTodayList', JSON.stringify(borrowedTodayList));

            document.getElementById('borrowBookForm').reset();
            document.getElementById('borrowSuccess').classList.remove('hidden');
        });
    </script>
</body>
</html>
